<!DOCTYPE html>
<html>
<head>
    <!-- Required meta tags -->
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

    <!-- Bootstrap CSS -->
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous">
    <title></title>
</head>
<body>
   
    <div class="container" >
        <div class="row" style="margin-bottom:20px">
            <div class="col-12">
                <div id="carouselExampleIndicators" class="carousel slide" data-ride="carousel">
                    <div class="carousel-indicators">
                        <button type="button" data-target="#carouselExampleIndicators" data-slide-to="0" class="active" aria-current="true" aria-label="Slide 1"></button>
                        <button type="button" data-target="#carouselExampleIndicators" data-slide-to="1" aria-label="Slide 2"></button>
                        <button type="button" data-target="#carouselExampleIndicators" data-slide-to="2" aria-label="Slide 3"></button>
                    </div>
                    <div class="carousel-inner">
                        <div class="carousel-item active">
                            <img src="../picture/2.jpg" class="d-block w-100" alt="...">
                            <div class="carousel-caption" d-done d-md-block">
                                <h5></h5>
                            </div>
                        </div>
                        <div class="carousel-item">
                            <img src="../picture/1.jpg" class="d-block w-100" alt="...">
                        </div>
                        <div class="carousel-item">
                            <img src="../picture/3.jpg" class="d-block w-100" alt="...">
                        </div>
                    </div>
                    <a href="#carouselExampleIndicators" class="carousel-control-prev" data-slide="prev">
                        <span class="carousel-control-prev-icon"></span>
                    </a>
                    <a href="#carouselExampleIndicators" class="carousel-control-next" data-slide="next">
                        <span class="carousel-control-next-icon"></span>
                    </a>
                </div>
                <select id="city" class="form-select" aria-label="Default select example">
                    <option selected>City</option>
                    <option value="1">臺北市</option>
                    <option value="2">新北市</option>
                    <option value="3">桃園市</option>
                </select>

                <button id="loadbtn1">Get Data</button>
                <div id="mydiv" class="row" style="text-align: center " >
               
                </div>
            </div>
        </div>
    </div>

    <!-- Optional JavaScript -->
    <!-- jQuery first, then Popper.js, then Bootstrap JS -->
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/umd/popper.min.js" integrity="sha384-UO2eT0CpHqdSJQ6hJty5KVphtPhzWj9WO1clHTMGa3JDZwrnQq4sF86dIHNDz0W1" crossorigin="anonymous"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js" integrity="sha384-JjSmVgyd0p3pXB1rRibZUAYoIIy6OrQ6VrjIEaFf/nJGzIxFDsf4x0xIM+B07jRM" crossorigin="anonymous"></script>

    <script>
        let url = "https://raw.githubusercontent.com/kiang/pharmacies/master/json/points.json";

        $("#loadbtn1").click(function () {
            $.getJSON(url, function (data) {
                var cities = document.getElementById("city");
                var opts = cities.value;
                if (opts == "1") {
                    var currentData = $.grep(data.features, function (item, i) {
                        return item.properties.county == "臺北市";
                    });

                    $.each(currentData, function (index, item) {
                        console.log(item);
                        
                        $("#mydiv").append("<div class=\"col-sm\"><div class=\"card\" style=\"width: 18rem; margin:10px\" ><div class=\"card-body\"><h5 class=\"card-title\">" + item.properties.county + "</h5><p class=\"card-text\">" + item.properties.name + "</p><p class=\"card-text\">" + item.properties.address + "</p><h5 class=\"card-title\">大人口罩數量:" + item.properties.mask_adult + "</h5><h5 class=\"card-title\">小孩口罩數量:" + item.properties.mask_child + "</h5></div></div></div>");


                    });
                }
                if (opts == "2") {
                    var currentData = $.grep(data.features, function (item, i) {
                        return item.properties.county == "新北市";
                    });

                    $.each(currentData, function (index, item) {
                        console.log(item);

                        $("#mydiv").append("<div class=\"col-sm\"><div class=\"card\" style=\"width: 18rem; margin:10px\" ><div class=\"card-body\"><h5 class=\"card-title\">" + item.properties.county + "</h5><p class=\"card-text\">" + item.properties.name + "</p><p class=\"card-text\">" + item.properties.address + "</p><h5 class=\"card-title\">大人口罩數量:" + item.properties.mask_adult + "</h5><h5 class=\"card-title\">小孩口罩數量:" + item.properties.mask_child + "</h5></div></div></div>");


                    });
                }
                if (opts == "3") {
                    var currentData = $.grep(data.features, function (item, i) {
                        return item.properties.county == "桃園市";
                    });

                    $.each(currentData, function (index, item) {
                        console.log(item);

                        $("#mydiv").append("<div class=\"col-sm\"><div class=\"card\" style=\"width: 18rem; margin:10px\" ><div class=\"card-body\"><h5 class=\"card-title\">" + item.properties.county + "</h5><p class=\"card-text\">" + item.properties.name + "</p><p class=\"card-text\">" + item.properties.address + "</p><h5 class=\"card-title\">大人口罩數量:" + item.properties.mask_adult +"</h5><h5 class=\"card-title\">小孩口罩數量:"+ item.properties.mask_child +"</h5></div></div></div>");


                    });
                }
            });
        });



    </script>
</body>
</html>